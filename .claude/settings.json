{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\ntool = inp.get('tool_name', '')\npath = inp.get('tool_input', {}).get('file_path', '')\nif 'package-lock.json' in path:\n    print('BLOCKED: Do not edit package-lock.json directly. Run npm install to update it.', file=sys.stderr)\n    sys.exit(1)\n\n# Design-token-guard: block primitive tokens being used directly in component files\nbasename = os.path.basename(path)\nis_component_ts = (path.endswith(('.tsx', '.ts')) and 'globals.css' not in path and 'multi-repo-nextjs' in path)\nis_component_swift = (path.endswith('.swift') and 'DesignTokens.swift' not in basename and 'multi-repo-ios' in path)\nis_component_kt = (path.endswith('.kt') and 'DesignTokens.kt' not in basename and 'multi-repo-android' in path)\ncontent = inp.get('tool_input', {}).get('new_string', '') or inp.get('tool_input', {}).get('content', '')\nif is_component_ts and content:\n    # Flag var(--color-*) primitive token references in component TSX/TS\n    primitives = re.findall(r'var\\(--color-[a-z0-9-]+\\)', content)\n    if primitives:\n        unique = list(dict.fromkeys(primitives))\n        print('[design-token-guard] BLOCKED: Primitive token(s) used directly in component file.', file=sys.stderr)\n        print(f'[design-token-guard] Found: {unique}', file=sys.stderr)\n        print('[design-token-guard] Use semantic tokens (var(--surfaces-*), var(--typography-*), etc.) instead.', file=sys.stderr)\n        sys.exit(1)\nif is_component_swift and content:\n    # Flag Color.color* primitive references in component Swift files\n    primitives = re.findall(r'\\.color(?:Zinc|Slate|Neutral|Red|Amber|Green|Indigo|Base)[A-Z][a-zA-Z0-9]+', content)\n    if primitives:\n        unique = list(dict.fromkeys(primitives))\n        print('[design-token-guard] BLOCKED: Primitive token(s) used directly in Swift component file.', file=sys.stderr)\n        print(f'[design-token-guard] Found: {unique}', file=sys.stderr)\n        print('[design-token-guard] Use semantic tokens (Color.surfaces*, Color.typography*, etc.) instead.', file=sys.stderr)\n        sys.exit(1)\nif is_component_kt and content:\n    primitives = re.findall(r'\\bPrimitiveColors\\.', content)\n    if primitives:\n        print('[design-token-guard] BLOCKED: PrimitiveColors.* used directly in Kotlin component file.', file=sys.stderr)\n        print('[design-token-guard] Use SemanticColors.* tokens instead.', file=sys.stderr)\n        sys.exit(1)\n\""
          },
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\nbasename = os.path.basename(path)\ncontent = inp.get('tool_input', {}).get('new_string', '') or inp.get('tool_input', {}).get('content', '')\nif not content:\n    sys.exit(0)\n\nis_component_ts = (path.endswith(('.tsx', '.ts')) and 'globals.css' not in path and 'multi-repo-nextjs' in path and 'node_modules' not in path)\nis_component_swift = (path.endswith('.swift') and 'DesignTokens.swift' not in basename and 'multi-repo-ios' in path)\nis_component_kt = (path.endswith('.kt') and 'DesignTokens.kt' not in basename and 'multi-repo-android' in path)\n\nif not (is_component_ts or is_component_swift or is_component_kt):\n    sys.exit(0)\n\nviolations = []\n\nif is_component_ts:\n    # BaseHighContrast and BaseLowContrastPressed must not be used for borders/structural elements.\n    # The only allowed use of low-contrast-pressed is for interactive pressed/active states.\n    bad_high = re.findall(r'var\\(--surfaces-base-high-contrast(?!-hover|-pressed)[^)]*\\)', content)\n    bad_low_pressed_non_interactive = re.findall(r'var\\(--surfaces-base-low-contrast-pressed[^)]*\\)', content)\n    for m in bad_high:\n        violations.append(f'  TSX: {m}  →  Use var(--border-default) or var(--border-muted) for borders/lines')\n    for m in bad_low_pressed_non_interactive:\n        violations.append(f'  TSX: {m}  →  Only allowed for pressed/active interactive states (Chip, Button). Use var(--border-default) for structural lines.')\n\nif is_component_swift:\n    bad_high = re.findall(r'\\.surfacesBaseHighContrast(?!Hover|Pressed)', content)\n    bad_low_pressed = re.findall(r'\\.surfacesBaseLowContrastPressed', content)\n    for m in bad_high:\n        violations.append(f'  Swift: {m}  →  Use .appBorderDefault or .appBorderMuted for borders/lines')\n    for m in bad_low_pressed:\n        violations.append(f'  Swift: {m}  →  Only allowed for pressed/active states (Chip ON, Button pressed). Use .appBorderDefault for structural lines.')\n\nif violations:\n    print('', file=sys.stderr)\n    print('[design-token-semantics-guard] BLOCKED: Semantic token misuse detected:', file=sys.stderr)\n    for v in violations:\n        print(v, file=sys.stderr)\n    print('', file=sys.stderr)\n    print('[design-token-semantics-guard] Token semantic rules:', file=sys.stderr)\n    print('  BaseLowContrastPressed  → interactive pressed/active state ONLY (Chip ON, Button press)', file=sys.stderr)\n    print('  BaseHighContrast        → higher-prominence surface ONLY (not for borders/lines)', file=sys.stderr)\n    print('  Border/Default          → dividers, separators, input borders, connector lines', file=sys.stderr)\n    print('  Border/Muted            → subtle row dividers, hairline separators', file=sys.stderr)\n    print('', file=sys.stderr)\n    print('[design-token-semantics-guard] See docs/design-tokens.md#important-semantic-token-guidelines', file=sys.stderr)\n    sys.exit(1)\n\""
          },
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\ncontent = inp.get('tool_input', {}).get('content', '') or inp.get('tool_input', {}).get('new_string', '')\nif not content:\n    sys.exit(0)\nif not (path.endswith('.tsx') or path.endswith('.swift') or path.endswith('.kt')):\n    sys.exit(0)\n# Only fire on new file writes (content present), not small edits\nif inp.get('tool_name') not in ('Write',):\n    sys.exit(0)\n# Check if file composes 2+ known atomic components\natomics = ['Button', 'IconButton', 'Badge', 'Label', 'Chip', 'Tabs', 'SegmentControlBar', 'Thumbnail', 'InputField', 'Toast', 'Divider']\nfound = [c for c in atomics if re.search(r'\\b' + c + r'\\b', content)]\nif len(found) >= 2:\n    print('')\n    print('[complex-component-clarifier] This file composes multiple atomic components: ' + ', '.join(found))\n    print('[complex-component-clarifier] Before writing, confirm you have clarified:')\n    print('[complex-component-clarifier]   1. State ownership — who owns what state (parent vs child)?')\n    print('[complex-component-clarifier]   2. Keyboard interactions — tab order, Enter/Space, Escape?')\n    print('[complex-component-clarifier]   3. Figma scope — using Figma as visual reference only, not structural truth?')\n    print('[complex-component-clarifier]   4. All states handled — loading, empty, error, disabled?')\n    print('[complex-component-clarifier] Run /complex-component <name> to go through the full clarification phase.')\n    print('')\n\""
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\nif not path:\n    sys.exit(0)\n\n# Only fire on new component files (not demo/page/test files)\nis_web_component = (\n    path.endswith('.tsx')\n    and 'multi-repo-nextjs' in path\n    and '/components/' in path\n    and 'page.tsx' not in path\n    and '-demo' not in path\n    and 'index.' not in path\n)\nis_ios_component = (\n    path.endswith('.swift')\n    and 'multi-repo-ios' in path\n    and '/Components/' in path\n    and 'ContentView' not in path\n    and 'App.swift' not in path\n    and 'DesignTokens' not in path\n    and 'Preview' not in path\n)\n\nif is_web_component or is_ios_component:\n    basename = os.path.basename(path)\n    platform = 'Web' if is_web_component else 'iOS'\n    counterpart = 'iOS (ContentView.swift)' if is_web_component else 'Web (app/page.tsx)'\n    demo_file = 'multi-repo-nextjs/app/page.tsx' if is_web_component else 'multi-repo-ios/.../ContentView.swift'\n    print('')\n    print(f'[auto-demo-updater] New {platform} component written: {basename}')\n    print(f'[auto-demo-updater] Remember to add showcase examples to:')\n    print(f'[auto-demo-updater]   1. {demo_file}  ({platform} demo page)')\n    print(f'[auto-demo-updater]   2. Counterpart demo for {counterpart}')\n    print(f'[auto-demo-updater]   3. Update docs/components.md registry with Status: Done')\n    print('')\n\""
          },
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\ncontent = inp.get('tool_input', {}).get('content', '')\nif not path or not content:\n    sys.exit(0)\n\n# Screen-structure-guard: check new screen files for component library usage and nav wiring\nis_web_page = (path.endswith('page.tsx') and 'multi-repo-nextjs/app/' in path and '/components/' not in path)\nis_ios_view = (path.endswith('View.swift') and 'multi-repo-ios' in path and '/Components/' not in path and '/Native/' not in path and 'ContentView' not in path and 'Preview' not in path)\nis_android_screen = (path.endswith('Screen.kt') and 'multi-repo-android' in path and '/ui/components/' not in path and '/ui/native/' not in path and '/ui/theme/' not in path)\n\nif not (is_web_page or is_ios_view or is_android_screen):\n    sys.exit(0)\n\nwarnings = []\n\nif is_web_page:\n    # Check for component library imports\n    has_component_import = bool(re.search(r'from\\s+[\\x27\\\"]@/app/components/', content))\n    if not has_component_import:\n        warnings.append('No imports from @/app/components/ — use design system components (Button, InputField, Badge, etc.) instead of raw HTML')\n    # Remind about metadata export\n    if 'export const metadata' not in content and 'export function generateMetadata' not in content:\n        warnings.append('Missing metadata export — add export const metadata = { title: ... } for SEO and accessibility')\n\nif is_ios_view:\n    # Check for component library imports\n    has_app_component = bool(re.search(r'\\bApp(?:Button|IconButton|Badge|Label|Chip|Tabs|SegmentControlBar|Thumbnail|InputField|Toast|Divider|TextBlock|StepIndicator|Stepper|ListItem|NativePicker|DateTimePicker|ProgressLoader|ColorPicker|BottomSheet|ActionSheet|AlertPopup|PageHeader|ContextMenu|BottomNavBar|Carousel|Tooltip|RangeSlider)\\b', content))\n    if not has_app_component:\n        warnings.append('No App* component imports detected — use design system components (AppButton, AppInputField, etc.) instead of raw SwiftUI views')\n    # Remind about navigation wiring\n    basename = os.path.basename(path)\n    warnings.append(f'Reminder: wire {basename.replace(\".swift\", \"\")} into ContentView.swift navigation (NavigationLink or tab entry)')\n\nif is_android_screen:\n    has_app_component = bool(re.search(r'\\bApp(?:Button|IconButton|Badge|Label|Chip|Tabs|InputField|Divider|NativePicker|ProgressLoader|BottomSheet)\\b', content))\n    if not has_app_component:\n        warnings.append('No App* component imports detected — use design system components instead of raw Compose views')\nif warnings:\n    print('')\n    print('[screen-structure-guard] New screen file detected: ' + os.path.basename(path))\n    for w in warnings:\n        print(f'[screen-structure-guard]   - {w}')\n    print('')\n\""
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\ncontent = inp.get('tool_input', {}).get('content', '') or inp.get('tool_input', {}).get('new_string', '')\nif not path or not content:\n    sys.exit(0)\nis_ios = path.endswith('.swift') and 'multi-repo-ios' in path\nis_web = path.endswith('.tsx') and 'multi-repo-nextjs' in path\nis_android = path.endswith('.kt') and 'multi-repo-android' in path\nif not is_ios and not is_web and not is_android:\n    sys.exit(0)\nif is_ios and ('/Components/Native/' in path or 'NativeComponentStyling' in path or 'DesignTokens' in path):\n    sys.exit(0)\nif is_web and ('/components/Native/' in path or '/components/ui/' in path):\n    sys.exit(0)\nif is_android and ('/ui/native/' in path or '/ui/components/' in path or '/ui/theme/' in path):\n    sys.exit(0)\n# iOS: check for raw SwiftUI APIs that have App* wrappers\nif is_ios:\n    raw_apis = {\n        r'\\bPicker\\s*\\(': 'AppNativePicker',\n        r'\\bDatePicker\\s*\\(': 'AppDateTimePicker',\n        r'\\bProgressView\\s*\\(': 'AppProgressLoader',\n        r'\\bColorPicker\\s*\\(': 'AppColorPicker',\n        r'\\.sheet\\s*\\(': 'AppBottomSheet (.appBottomSheet modifier)',\n        r'\\.confirmationDialog\\s*\\(': 'AppActionSheet (.appActionSheet modifier)',\n        r'\\.alert\\s*\\(': 'AppAlertPopup (.appAlert modifier)',\n        r'\\.contextMenu\\s*\\(': 'AppContextMenu (.appContextMenu modifier)',\n    }\n    found = []\n    for pattern, wrapper in raw_apis.items():\n        if re.search(pattern, content):\n            found.append((pattern.replace('\\\\b','').replace('\\\\s*\\\\(','(').replace('\\\\.','.')[:25], wrapper))\n    if found:\n        print('')\n        print('[native-wrapper-guard] Raw SwiftUI API detected in screen file:')\n        for raw, wrapper in found:\n            print(f'[native-wrapper-guard]   {raw}  ->  Use {wrapper} from Components/Native/ instead')\n        print('[native-wrapper-guard] Native wrappers apply consistent styling from NativeComponentStyling.swift.')\n        print('')\n# Web: check for raw shadcn primitives that have App* wrappers\nif is_web:\n    raw_web = [\n        ('<Select',       'AppNativePicker'),\n        ('<Drawer',       'AppBottomSheet'),\n        ('<AlertDialog',  'AppActionSheet or AppAlertPopup'),\n        ('<Carousel',     'AppCarousel'),\n        ('<Slider',       'AppRangeSlider'),\n        ('<ContextMenu',  'AppContextMenu mode=context'),\n        ('<DropdownMenu', 'AppContextMenu mode=dropdown'),\n        ('<Calendar',     'AppDateTimePicker'),\n    ]\n    found = []\n    for tag, wrapper in raw_web:\n        if tag in content:\n            found.append((tag + '>', wrapper))\n    if found:\n        print('')\n        print('[native-wrapper-guard] Raw shadcn primitive detected in page/screen file:')\n        for raw, wrapper in found:\n            print(f'[native-wrapper-guard]   {raw}  ->  Use {wrapper} from @/app/components/Native/ instead')\n        print('[native-wrapper-guard] Native wrappers apply consistent design tokens via the per-file styling block.')\n        print('')\nif is_android:\n    raw_android = [\n        ('ExposedDropdownMenuBox', 'AppNativePicker'),\n        ('DatePickerDialog', 'AppDateTimePicker'),\n        ('TimePickerDialog', 'AppDateTimePicker'),\n        ('ModalBottomSheet', 'AppBottomSheet'),\n        ('NavigationBar(', 'AppBottomNavBar'),\n        ('HorizontalPager', 'AppCarousel'),\n        ('PlainTooltip', 'AppTooltip'),\n    ]\n    found = [(raw, wrap) for raw, wrap in raw_android if raw in content]\n    if found:\n        print('')\n        print('[native-wrapper-guard] Raw Material 3 API detected in Android screen file:')\n        for raw, wrapper in found:\n            print(f'[native-wrapper-guard]   {raw}  ->  Use {wrapper} from ui/native/ instead')\n        print('[native-wrapper-guard] Native wrappers apply consistent styling from NativeComponentStyling.kt.')\n        print('')\n\""
          },
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\nif not path:\n    sys.exit(0)\nbasename = os.path.basename(path)\nif path.endswith('.swift'):\n    print(f'[cross-platform] Edited {basename}')\n    print('[cross-platform] Reminder: check counterparts in multi-repo-nextjs/ and multi-repo-android/')\nelif path.endswith(('.tsx', '.ts')) and 'multi-repo-nextjs' in path:\n    print(f'[cross-platform] Edited {basename}')\n    print('[cross-platform] Reminder: check counterparts in multi-repo-ios/ and multi-repo-android/')\nelif path.endswith('.kt') and 'multi-repo-android' in path:\n    print(f'[cross-platform] Edited {basename}')\n    print('[cross-platform] Reminder: check counterparts in multi-repo-nextjs/ and multi-repo-ios/')\nelif 'globals.css' in path or ('Color' in basename and path.endswith('.swift')) or ('DesignTokens' in basename and path.endswith('.kt')):\n    print('[design-token-sync] Design token file changed.')\n    print('[design-token-sync] Run /design-token-sync to keep CSS variables and Swift Color extensions in sync.')\nelif 'Icon' in basename and (path.endswith('.tsx') or path.endswith('.swift')):\n    print('[icon-system] Icon system file changed.')\n    print('[icon-system] Ensure web <Icon /> wrapper and iOS PhosphorIcon view stay in sync.')\n    print('[icon-system] Verify docs/design-tokens.md#icon-system is up to date.')\n\""
          },
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\nif not path:\n    sys.exit(0)\nif not (path.endswith('.tsx') or path.endswith('.swift') or path.endswith('.kt')):\n    sys.exit(0)\n# Skip non-component files\nif 'components' not in path and 'Components' not in path and '/ui/' not in path:\n    sys.exit(0)\ncontent = inp.get('tool_input', {}).get('content', '') or inp.get('tool_input', {}).get('new_string', '')\nif not content:\n    sys.exit(0)\nlines = content.split('\\n')\ntotal = len(lines)\ncomment_lines = [l for l in lines if l.strip().startswith('//') or l.strip().startswith('/*') or l.strip().startswith('*')]\nif total > 80 and len(comment_lines) < 3:\n    basename = os.path.basename(path)\n    print(f'[comment-enforcer] {basename} has {total} lines but only {len(comment_lines)} comment line(s).')\n    print('[comment-enforcer] Complex components (>80 lines) require section headers and JSDoc/MARK comments.')\n    print('[comment-enforcer] Web: // --- Props, // --- State, // --- Render')\n    print('[comment-enforcer] iOS: // MARK: - Properties, // MARK: - Body, // MARK: - Subviews')\n\""
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, subprocess\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\nif not path:\n    sys.exit(0)\nif not (path.endswith('.tsx') or path.endswith('.ts')):\n    sys.exit(0)\nif 'multi-repo-nextjs' not in path:\n    sys.exit(0)\nif 'node_modules' in path:\n    sys.exit(0)\n# Derive the nextjs project root\nidx = path.find('multi-repo-nextjs')\nif idx == -1:\n    sys.exit(0)\nproject_root = path[:idx + len('multi-repo-nextjs')]\ntry:\n    result = subprocess.run(\n        ['npx', 'eslint', '--fix', '--quiet', path],\n        cwd=project_root,\n        capture_output=True, text=True, timeout=15\n    )\n    if result.returncode != 0 and result.stdout.strip():\n        print('[auto-lint] ESLint issues found:')\n        for line in result.stdout.strip().split('\\n')[:5]:\n            print(f'[auto-lint]   {line}')\nexcept Exception:\n    pass\n\"",
            "timeout": 20
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os, re\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\ncontent = inp.get('tool_input', {}).get('content', '') or inp.get('tool_input', {}).get('new_string', '')\nif not path or not content:\n    sys.exit(0)\nbasename = os.path.basename(path)\nif 'Adaptive' in basename:\n    sys.exit(0)\nis_ios_screen = (path.endswith('.swift') and 'multi-repo-ios' in path and '/Components/' not in path and 'DesignTokens' not in path and 'NativeComponentStyling' not in path and 'App.swift' not in basename)\nis_web_page = (path.endswith(('.tsx', '.ts')) and 'multi-repo-nextjs' in path and '/components/' not in path and 'node_modules' not in path)\nis_android_screen = (path.endswith('Screen.kt') and 'multi-repo-android' in path and '/ui/components/' not in path and '/ui/native/' not in path)\nwarnings = []\nif is_ios_screen:\n    raw_nav = [(r'\\bNavigationStack\\b', 'AdaptiveNavShell'), (r'\\bTabView\\s*[({]', 'AdaptiveNavShell'), (r'\\bNavigationSplitView\\b', 'AdaptiveSplitView')]\n    for pat, wrapper in raw_nav:\n        if re.search(pat, content):\n            short = pat[:18].replace('\\\\b','').replace('\\\\s*','').replace('[({]','')\n            warnings.append(f'Raw navigation primitive detected -> use {wrapper} wrapper instead')\n            break\nif is_web_page and 'page.tsx' in basename and inp.get('tool_name') == 'Write':\n    if not (re.search(r'\\bmd:', content) or '// responsive: N/A' in content):\n        warnings.append('No responsive md: classes found. Add md: Tailwind variants for desktop layout or mark // responsive: N/A')\nif is_ios_screen and basename.endswith('View.swift') and 'ContentView' not in basename and inp.get('tool_name') == 'Write':\n    if not (re.search(r'horizontalSizeClass|Adaptive(?:NavShell|SplitView|Sheet)', content) or '// responsive: N/A' in content):\n        warnings.append('No adaptive layout detected. Use horizontalSizeClass or Adaptive* wrappers, or mark // responsive: N/A')\nif is_android_screen and inp.get('tool_name') == 'Write':\n    if not (re.search(r'WindowWidthSizeClass|Adaptive(?:NavShell|SplitView|Sheet)', content) or '// responsive: N/A' in content):\n        warnings.append('No adaptive layout detected. Use WindowWidthSizeClass or Adaptive* wrappers, or mark // responsive: N/A')\nif warnings:\n    print('')\n    print('[adaptive-layout-guard] ' + basename)\n    for w in warnings:\n        print(f'[adaptive-layout-guard]   - {w}')\n    print('')\n\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport subprocess, sys, os\n\n# Check which repos have unpushed commits\nrepos = {\n    'workspace (multi-repo-sample)': '/Users/abhishekverma/Documents/multi-repo-sample',\n    'multi-repo-nextjs': '/Users/abhishekverma/Documents/multi-repo-sample/multi-repo-nextjs',\n    'multi-repo-ios': '/Users/abhishekverma/Documents/multi-repo-sample/multi-repo-ios',\n    'multi-repo-android': '/Users/abhishekverma/Documents/multi-repo-sample/multi-repo-android',\n}\n\ndirty = []\nfor name, path in repos.items():\n    try:\n        status = subprocess.run(['git', 'status', '--porcelain'], cwd=path, capture_output=True, text=True)\n        ahead = subprocess.run(['git', 'log', '--oneline', '@{u}..HEAD'], cwd=path, capture_output=True, text=True)\n        if status.stdout.strip() or ahead.stdout.strip():\n            dirty.append(name)\n    except Exception:\n        pass\n\nif dirty:\n    print('')\n    print('\\u250c' + '\\u2500' * 58 + '\\u2510')\n    print('\\u2502  \\U0001f4e4  Unpushed changes detected                           \\u2502')\n    print('\\u251c' + '\\u2500' * 58 + '\\u2524')\n    for r in dirty:\n        label = f'  \\u2022 {r}'\n        print(f'\\u2502{label:<58}\\u2502')\n    print('\\u251c' + '\\u2500' * 58 + '\\u2524')\n    print('\\u2502  Run /git-push to commit and push all repos.          \\u2502')\n    print('\\u2514' + '\\u2500' * 58 + '\\u2518')\n    print('')\n\nprint('')\nprint('\\u250c' + '\\u2500' * 58 + '\\u2510')\nprint('\\u2502  \\U0001f4dd  Post-session checklist                            \\u2502')\nprint('\\u251c' + '\\u2500' * 58 + '\\u2524')\nprint('\\u2502  Evaluate whether these need updating:                \\u2502')\nprint('\\u2502  \\u2022 docs/design-tokens.md (new tokens added?)         \\u2502')\nprint('\\u2502  \\u2022 docs/api-contracts.md (schema changes?)           \\u2502')\nprint('\\u2502  \\u2022 CLAUDE.md files (new conventions/packages?)       \\u2502')\nprint('\\u2502  \\u2022 .claude/skills/ (new repeatable workflow?)        \\u2502')\nprint('\\u2502  \\u2022 .claude/agents/ (new validation needed?)          \\u2502')\nprint('\\u2502  Run /post-session-review for guided checklist.      \\u2502')\nprint('\\u2514' + '\\u2500' * 58 + '\\u2518')\nprint('')\n\""
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "osascript -e 'display notification \"Claude is waiting for input\" with title \"Claude Code\" sound name \"Ping\"' 2>/dev/null || true"
          }
        ]
      }
    ]
  }
}
