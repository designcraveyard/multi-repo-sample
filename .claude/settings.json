{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\ntool = inp.get('tool_name', '')\npath = inp.get('tool_input', {}).get('file_path', '')\nif 'package-lock.json' in path:\n    print('BLOCKED: Do not edit package-lock.json directly. Run npm install to update it.', file=sys.stderr)\n    sys.exit(1)\n\""
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport sys, json, os\ntry:\n    inp = json.load(sys.stdin)\nexcept Exception:\n    sys.exit(0)\npath = inp.get('tool_input', {}).get('file_path', '')\nif not path:\n    sys.exit(0)\nbasename = os.path.basename(path)\nif path.endswith('.swift'):\n    print(f'[cross-platform] Edited {basename}')\n    print('[cross-platform] Reminder: check if a web counterpart exists in multi-repo-nextjs/ for this feature.')\nelif path.endswith(('.tsx', '.ts')) and 'multi-repo-nextjs' in path:\n    print(f'[cross-platform] Edited {basename}')\n    print('[cross-platform] Reminder: check if an iOS counterpart exists in multi-repo-ios/ for this feature.')\nelif 'globals.css' in path or ('Color' in basename and path.endswith('.swift')):\n    print('[design-token-sync] Design token file changed.')\n    print('[design-token-sync] Run /design-token-sync to keep CSS variables and Swift Color extensions in sync.')\nelif 'Icon' in basename and (path.endswith('.tsx') or path.endswith('.swift')):\n    print('[icon-system] Icon system file changed.')\n    print('[icon-system] Ensure web <Icon /> wrapper and iOS PhosphorIcon view stay in sync.')\n    print('[icon-system] Verify docs/design-tokens.md#icon-system is up to date.')\n\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 -c \"\nimport subprocess, sys, os\n\n# Check which repos have unpushed commits\nrepos = {\n    'workspace (multi-repo-sample)': '/Users/abhishekverma/Documents/GitHub/multi-repo-sample',\n    'multi-repo-nextjs': '/Users/abhishekverma/Documents/GitHub/multi-repo-sample/multi-repo-nextjs',\n    'multi-repo-ios': '/Users/abhishekverma/Documents/GitHub/multi-repo-sample/multi-repo-ios',\n}\n\ndirty = []\nfor name, path in repos.items():\n    try:\n        status = subprocess.run(['git', 'status', '--porcelain'], cwd=path, capture_output=True, text=True)\n        ahead = subprocess.run(['git', 'log', '--oneline', '@{u}..HEAD'], cwd=path, capture_output=True, text=True)\n        if status.stdout.strip() or ahead.stdout.strip():\n            dirty.append(name)\n    except Exception:\n        pass\n\nif dirty:\n    print('')\n    print('\\u250c' + '\\u2500' * 58 + '\\u2510')\n    print('\\u2502  \\U0001f4e4  Unpushed changes detected                           \\u2502')\n    print('\\u251c' + '\\u2500' * 58 + '\\u2524')\n    for r in dirty:\n        label = f'  \\u2022 {r}'\n        print(f'\\u2502{label:<58}\\u2502')\n    print('\\u251c' + '\\u2500' * 58 + '\\u2524')\n    print('\\u2502  Run /git-push to commit and push all repos.          \\u2502')\n    print('\\u2514' + '\\u2500' * 58 + '\\u2518')\n    print('')\n\nprint('')\nprint('\\u250c' + '\\u2500' * 58 + '\\u2510')\nprint('\\u2502  \\U0001f4dd  Post-session checklist                            \\u2502')\nprint('\\u251c' + '\\u2500' * 58 + '\\u2524')\nprint('\\u2502  Evaluate whether these need updating:                \\u2502')\nprint('\\u2502  \\u2022 docs/design-tokens.md (new tokens added?)         \\u2502')\nprint('\\u2502  \\u2022 docs/api-contracts.md (schema changes?)           \\u2502')\nprint('\\u2502  \\u2022 CLAUDE.md files (new conventions/packages?)       \\u2502')\nprint('\\u2502  \\u2022 .claude/skills/ (new repeatable workflow?)        \\u2502')\nprint('\\u2502  \\u2022 .claude/agents/ (new validation needed?)          \\u2502')\nprint('\\u2502  Run /post-session-review for guided checklist.      \\u2502')\nprint('\\u2514' + '\\u2500' * 58 + '\\u2518')\nprint('')\n\""
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "osascript -e 'display notification \"Claude is waiting for input\" with title \"Claude Code\" sound name \"Ping\"' 2>/dev/null || true"
          }
        ]
      }
    ]
  }
}
